<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="citestate.js"></script>
    <title>Cite Game State</title>
    <script>
        var savedState;

        function manageSaveState(stateData){
            savedState = stateData;
        }

        function manageLoadState(stateData){
            savedState = stateData;
        }

        function manageSaveExtraFiles(fileMapping){
            var fm = fileMapping;
        }

        function listFilePaths(emu){
            var paths = [];
            for (var fileName in emu.extraFiles){
                paths.push(fileName);
            }
            return paths;
        }
    </script>
</head>
<body>
<div id="target" style="width:320px; height:240px"></div>
<a style="color:blue" onclick="emu.setMuted(!emu.isMuted())">Toggle audio</a>
<a style="color:red" onclick="emu.saveState(manageSaveState)">Save State</a>
<a style="color:green" onclick="emu.loadState(savedState, manageLoadState)">Load State</a>
<a style="color:grey" onclick="emu.saveExtraFiles(['state'], manageSaveExtraFiles)">Save Extra Files (State)</a>
<a style="color:grey" onclick="emu.saveExtraFiles(['battery'], manageSaveExtraFiles)">Save Extra Files (Battery)</a>
<div id="target2" style="width:320px; height:240px"></div>
<a style="color:blue" onclick="emu2.setMuted(!emu2.isMuted())">Toggle audio</a>
<a style="color:red" onclick="emu2.saveState(manageSaveState)">Save State</a>
<a style="color:green" onclick="emu2.loadState(savedState, manageLoadState)">Load State</a>
<a style="color:grey" onclick="emu2.saveExtraFiles(['state'], manageSaveExtraFiles)">Save Extra Files (State)</a>
<a style="color:grey" onclick="emu2.saveExtraFiles(['battery'], manageSaveExtraFiles)">Save Extra Files (Battery)</a>
<div id="target3" style="width:320px; height:240px"></div>
<a style="color:blue" onclick="emu3.setMuted(!emu3.isMuted())">Toggle audio</a>
<a style="color:red" onclick="emu3.saveState(manageSaveState)">Save State</a>
<a style="color:green" onclick="emu3.loadState(savedState, manageLoadState)">Load State</a>
<a style="color:grey" onclick="emu3.saveExtraFiles(listFilePaths(emu3), manageSaveExtraFiles)">Save Extra Files</a>
</body>
<script>
    CiteState.cite("target", function (emu) {
        window.emu = emu;
    }, "zelda_lotp.smc");
    CiteState.cite("target2", function (emu) {
        window.emu2 = emu;
    }, "zelda.nes");
    CiteState.cite("target3", function (emu) {
        window.emu3 = emu;
    }, "OREGON.EXE", null, {
        "BIT8X8.GFT": "the-oregon-trail/BIT8X8.GFT",
        "DIALOGS.REC": "the-oregon-trail/DIALOGS.REC",
        "INSTALL.EXE": "the-oregon-trail/INSTALL.EXE",
        "LOGO.004": "the-oregon-trail/LOGO.004",
        "OREGON.EXE": "the-oregon-trail/OREGON.EXE",
        "OTMCGA.PCL": "the-oregon-trail/OTMCGA.PCL",
        "PRODUCT.PF": "the-oregon-trail/PRODUCT.PF",
        "SONGS.TXT": "the-oregon-trail/SONGS.TXT",
        "VGA256.BGI": "the-oregon-trail/VGA256.BGI",
        "file_id.diz": "the-oregon-trail/file_id.diz",
        "CGA.BGI": "the-oregon-trail/CGA.BGI",
        "HISCORES.REC": "the-oregon-trail/HISCORES.REC",
        "JOYCAL.REC": "the-oregon-trail/JOYCAL.REC",
        "LOGO.256": "the-oregon-trail/LOGO.256",
        "OTCGA.PCL": "the-oregon-trail/OTCGA.PCL",
        "PAL.256": "the-oregon-trail/PAL.256",
        "README": "the-oregon-trail/README",
        "TOMB.REC": "the-oregon-trail/TOMB.REC",
        "ZOP12.GAM": "the-oregon-trail/ZOP12.GAM"
    });
</script>
</html>